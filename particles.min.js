class ParticlesSquared{constructor(e){if(!e||null==document.getElementById(e)){console.warn("Please give a valid ID to a canvas element as the first argument in the constructor.");return}this.author="JobiDev",this.repo="https://github.com/JobiDev/ParticlesSquared",this.version="1.0",this.canvas=document.getElementById(e),this.canvas_id=e,this.ctx=this.canvas.getContext("2d"),this.elements=[],this.instanceID=String(Math.random()).replace("0","").replace(".",""),this.canvas.style.pointerEvents="none"}validConfig(e){return"amount"in e&&"size"in e&&"speed"in e&&"color"in e&&"shape"in e&&"direction"in e&&"straight"in e}load(e){this.validConfig(e)?console.log("Successfully loaded config, please report any wierd bugs!"):console.warn("Invalid config! Support will not be given for any wierd errors / bugs :(     [Check the docs if you need help with your config!]");let t=e.amount,i=e.color,s=e.speed,a=e.shape,n=e.size;for(let r=0;r<t;r++){let c=2*Math.random()*Math.PI,h,l;switch(h=Math.cos(c)*s,l=Math.sin(c)*s,e.direction){case"random":h=Math.cos(c)*s,l=Math.sin(c)*s;break;case"top":l=-1*s,h=e.straight?0:h/2;break;case"bottom":l=1*s,h=e.straight?0:h/2;break;case"left":h=-1*s,l=e.straight?0:l/2;break;case"right":h=1*s,l=e.straight?0:l/2}this.elements.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vel:[h,l],size:n*Math.random(),shape:a,color:i})}if(!e.effects)return;let o=e.effects;if(o.clicking.enabled&&(this.clickListener=e=>{if(this.paused)return;let t=e.clientX,s=e.clientY;for(let r=0;r<o.clicking.amount;r++){let c=2*Math.random()*Math.PI;this.elements.push({x:t,y:s,vel:[Math.cos(c)*o.clicking.speed*Math.random(),Math.sin(c)*o.clicking.speed*Math.random()],size:n*Math.random(),shape:a,color:i,maxLifeSpan:o.clicking.lifespan,currentLifeSpan:0})}},window.addEventListener("click",this.clickListener)),o.hover.enabled){let d=0,p=0;window.addEventListener("mousemove",e=>{d=e.clientX,p=e.clientY}),this.hoverInterval=window.setInterval(()=>{if(!this.paused)for(let e=0;e<o.hover.amount;e++){let t=2*Math.random()*Math.PI;this.elements.push({x:d,y:p,vel:[Math.cos(t)*o.hover.speed*Math.random(),Math.sin(t)*o.hover.speed*Math.random()],size:n*Math.random(),shape:a,color:i,maxLifeSpan:o.hover.lifespan,currentLifeSpan:0})}},10)}}draw(e){this.ctx.globalAlpha=1,this.ctx.fillStyle=e.color;let t=e.x,i=e.y,s=e.size,a=e.vel[0],n=e.vel[1];if(e.x+=a,e.y+=n,this.canvas.width,this.canvas.height,e.x>this.canvas.width&&(e.x=0),e.x<0&&(e.x=this.canvas.width),e.y>this.canvas.height&&(e.y=0),e.y<0&&(e.y=this.canvas.height),e.maxLifeSpan){let r=1-e.currentLifeSpan/e.maxLifeSpan;if(this.ctx.globalAlpha=r,e.currentLifeSpan>e.maxLifeSpan){let c=this.elements.indexOf(e);this.elements.splice(c,1);return}e.currentLifeSpan+=1}switch(e.shape){case"square":this.ctx.fillRect(t-s/2,i-s/2,s,s);return;case"circle":this.ctx.beginPath(),this.ctx.arc(t,i,s/2,0,2*Math.PI,!0),this.ctx.fill();return;case"star":this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-e.size/2);for(let h=0;h<10;h++){let l=h*Math.PI/5,o=h%2==0?e.size/2:e.size/2*.5,d=e.x+Math.sin(l)*o,p=e.y-Math.cos(l)*o;this.ctx.lineTo(d,p)}this.ctx.closePath(),this.ctx.fill();return}}start(){let e=this.instanceID+"-running";!0===window[e]&&console.warn("Starting an instance multiple times *WILL* lead to unexpected behavior, please stop the current instance."),window[e]=!0,this.paused=!1;let t=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.elements.forEach(e=>{this.draw(e)}),this.loopID=window.requestAnimationFrame(t)};t()}pause(){let e=this.instanceID+"-running";window[e]=!1,this.paused=!0,null!==this.loopID&&(window.cancelAnimationFrame(this.loopID),this.loopID=null,this.isPaused=!0)}unpause(){this.paused=!1,this.isPaused&&this.start()}stop(){this.pause(),window.clearInterval(this.hoverInterval),window.removeEventListener("click",this.clickListener),this.elements=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}